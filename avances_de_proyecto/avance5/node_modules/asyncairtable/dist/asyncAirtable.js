/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ 300:
/***/ ((module, exports) => {



// ref: https://github.com/tc39/proposal-global
var getGlobal = function () {
	// the only reliable means to get the global object is
	// `Function('return this')()`
	// However, this causes CSP violations in Chrome apps.
	if (typeof self !== 'undefined') { return self; }
	if (typeof window !== 'undefined') { return window; }
	if (typeof global !== 'undefined') { return global; }
	throw new Error('unable to locate global object');
}

var global = getGlobal();

module.exports = exports = global.fetch;

// Needed for TypeScript and Webpack.
if (global.fetch) {
	exports.default = global.fetch.bind(global);
}

exports.Headers = global.Headers;
exports.Request = global.Request;
exports.Response = global.Response;

/***/ }),

/***/ 759:
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {


var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var fetch_1 = __webpack_require__(276);
var buildOpts_1 = __webpack_require__(368);
var checkError_1 = __webpack_require__(320);
var checkArg_1 = __webpack_require__(917);
var rateLimitHandler_1 = __webpack_require__(682);
var baseURL = 'https://api.airtable.com/v0';
var validOptions = [
    'fields',
    'filterByFormula',
    'maxRecords',
    'pageSize',
    'sort',
    'view',
    'where',
];
/**
 * The main AsyncAirtable class.
 */
var AsyncAirtable = /** @class */ (function () {
    /**
     * Creates a new instance of the AsyncAirtable library.
     * @param apiKey The API Key from AirTable
     * @param base The base id from AirTable
     * @param config The config to use for this instance of AsyncAirtable
     */
    function AsyncAirtable(apiKey, base, config) {
        var _this = this;
        /**
         * Select record(s) from the specified table.
         * @param table Table name
         * @param options Options object, used to filter records
         * @param page Used to get a specific page of records
         * @returns
         * @async
         */
        this.select = function (table, options, page) { return __awaiter(_this, void 0, void 0, function () {
            var url, opts, offset, data, i, res, body, err_1, done, res, body, err_2, err_3;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 20, , 21]);
                        checkArg_1.default(table, 'table', 'string');
                        checkArg_1.default(options, 'options', 'object', false);
                        checkArg_1.default(page, 'page', 'number', false);
                        url = baseURL + "/" + this.base + "/" + table;
                        opts = options ? __assign({}, options) : {};
                        Object.keys(opts).forEach(function (option) {
                            if (!validOptions.includes(option)) {
                                throw new Error("Invalid option: " + option);
                            }
                        });
                        offset = '';
                        data = [];
                        if (!page) return [3 /*break*/, 10];
                        i = 0;
                        _a.label = 1;
                    case 1:
                        if (!(i < page)) return [3 /*break*/, 9];
                        if (offset) {
                            opts.offset = offset;
                        }
                        _a.label = 2;
                    case 2:
                        _a.trys.push([2, 7, , 8]);
                        return [4 /*yield*/, fetch_1.default(url + "?" + buildOpts_1.default(opts), {
                                headers: { Authorization: "Bearer " + this.apiKey },
                            })];
                    case 3:
                        res = _a.sent();
                        return [4 /*yield*/, res.json()];
                    case 4:
                        body = _a.sent();
                        if (!checkError_1.default(res.status)) return [3 /*break*/, 6];
                        if (res.status !== 429) {
                            throw new Error(JSON.stringify(body));
                        }
                        if (!this.retryOnRateLimit) return [3 /*break*/, 6];
                        if (!(i + 1 === page)) return [3 /*break*/, 6];
                        return [4 /*yield*/, rateLimitHandler_1.default(url + "?" + buildOpts_1.default(opts), {
                                headers: { Authorization: "Bearer " + this.apiKey },
                            }, this.retryTimeout, this.maxRetry, 'records')];
                    case 5: return [2 /*return*/, _a.sent()];
                    case 6:
                        if (i + 1 === page) {
                            return [2 /*return*/, body.records];
                        }
                        offset = body.offset;
                        return [3 /*break*/, 8];
                    case 7:
                        err_1 = _a.sent();
                        throw new Error(err_1);
                    case 8:
                        i++;
                        return [3 /*break*/, 1];
                    case 9: return [3 /*break*/, 19];
                    case 10:
                        done = false;
                        _a.label = 11;
                    case 11:
                        if (!!done) return [3 /*break*/, 19];
                        if (offset) {
                            opts.offset = offset;
                        }
                        _a.label = 12;
                    case 12:
                        _a.trys.push([12, 17, , 18]);
                        return [4 /*yield*/, fetch_1.default(url + "?" + buildOpts_1.default(opts), {
                                headers: { Authorization: "Bearer " + this.apiKey },
                            })];
                    case 13:
                        res = _a.sent();
                        return [4 /*yield*/, res.json()];
                    case 14:
                        body = _a.sent();
                        if (!checkError_1.default(res.status)) return [3 /*break*/, 16];
                        if (res.status !== 429) {
                            throw new Error(JSON.stringify(body));
                        }
                        if (!this.retryOnRateLimit) return [3 /*break*/, 16];
                        return [4 /*yield*/, rateLimitHandler_1.default(url + "?" + buildOpts_1.default(opts), {
                                headers: { Authorization: "Bearer " + this.apiKey },
                            }, this.retryTimeout, this.maxRetry, 'records')];
                    case 15: return [2 /*return*/, _a.sent()];
                    case 16:
                        data = data.concat(body.records);
                        offset = body.offset;
                        if (!body.offset) {
                            done = true;
                        }
                        return [3 /*break*/, 18];
                    case 17:
                        err_2 = _a.sent();
                        throw new Error(err_2);
                    case 18: return [3 /*break*/, 11];
                    case 19: return [2 /*return*/, data];
                    case 20:
                        err_3 = _a.sent();
                        throw new Error(err_3);
                    case 21: return [2 /*return*/];
                }
            });
        }); };
        /**
         * Finds a record on the specified table.
         * @param table Table name
         * @param id Airtable record ID
         * @returns
         * @async
         */
        this.find = function (table, id) { return __awaiter(_this, void 0, void 0, function () {
            var url, res, data, err_4;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 5, , 6]);
                        checkArg_1.default(table, 'table', 'string');
                        checkArg_1.default(id, 'id', 'string');
                        url = baseURL + "/" + this.base + "/" + table + "/" + id;
                        return [4 /*yield*/, fetch_1.default(url, {
                                headers: { Authorization: "Bearer " + this.apiKey },
                            })];
                    case 1:
                        res = _a.sent();
                        return [4 /*yield*/, res.json()];
                    case 2:
                        data = _a.sent();
                        if (!checkError_1.default(res.status)) return [3 /*break*/, 4];
                        if (res.status !== 429) {
                            throw new Error(JSON.stringify(data));
                        }
                        if (!this.retryOnRateLimit) return [3 /*break*/, 4];
                        return [4 /*yield*/, rateLimitHandler_1.default(url, {
                                headers: { Authorization: "Bearer " + this.apiKey },
                            }, this.retryTimeout, this.maxRetry)];
                    case 3: return [2 /*return*/, _a.sent()];
                    case 4: return [2 /*return*/, data];
                    case 5:
                        err_4 = _a.sent();
                        throw new Error(err_4);
                    case 6: return [2 /*return*/];
                }
            });
        }); };
        /**
         * Creates a new record on the specified table.
         * @param table - Table name
         * @param record - Record object, used to structure data for insert
         * @param typecast - Used for allowing the ability to add new selections for Select and Multiselect fields.
         * @returns
         * @async
         */
        this.createRecord = function (table, record, typecast) { return __awaiter(_this, void 0, void 0, function () {
            var url, body, res, data, err_5;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 5, , 6]);
                        checkArg_1.default(table, 'table', 'string');
                        checkArg_1.default(record, 'record', 'object');
                        checkArg_1.default(typecast, 'typecast', 'boolean', false);
                        url = baseURL + "/" + this.base + "/" + table;
                        body = { fields: record };
                        if (typecast !== undefined) {
                            body.typecast = typecast;
                        }
                        return [4 /*yield*/, fetch_1.default(url, {
                                method: 'post',
                                body: JSON.stringify(body),
                                headers: {
                                    Authorization: "Bearer " + this.apiKey,
                                    'Content-Type': 'application/json',
                                },
                            })];
                    case 1:
                        res = _a.sent();
                        return [4 /*yield*/, res.json()];
                    case 2:
                        data = _a.sent();
                        if (!checkError_1.default(res.status)) return [3 /*break*/, 4];
                        if (res.status !== 429) {
                            throw new Error(JSON.stringify(data));
                        }
                        if (!this.retryOnRateLimit) return [3 /*break*/, 4];
                        return [4 /*yield*/, rateLimitHandler_1.default(url, {
                                method: 'post',
                                body: JSON.stringify(body),
                                headers: {
                                    Authorization: "Bearer " + this.apiKey,
                                    'Content-Type': 'application/json',
                                },
                            }, this.retryTimeout, this.maxRetry)];
                    case 3: return [2 /*return*/, _a.sent()];
                    case 4: return [2 /*return*/, data];
                    case 5:
                        err_5 = _a.sent();
                        throw new Error(err_5);
                    case 6: return [2 /*return*/];
                }
            });
        }); };
        /**
         * Updates a record on the specified table.
         * @param table - Table name
         * @param record - Record object, used to update data within a specific record
         * @param opts - An object with options for your update statement
         * @returns
         * @async
         */
        this.updateRecord = function (table, record, opts) { return __awaiter(_this, void 0, void 0, function () {
            var url, body, res, data, err_6;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 5, , 6]);
                        checkArg_1.default(table, 'table', 'string');
                        checkArg_1.default(record, 'record', 'object');
                        if (opts) {
                            checkArg_1.default(opts.destructive, 'opts.desctructive', 'boolean');
                            checkArg_1.default(opts.typecast, 'opts.typecast', 'boolean', false);
                        }
                        url = baseURL + "/" + this.base + "/" + table + "/" + record.id;
                        body = { fields: record.fields };
                        if ((opts === null || opts === void 0 ? void 0 : opts.typecast) !== undefined) {
                            body.typecast = opts === null || opts === void 0 ? void 0 : opts.typecast;
                        }
                        return [4 /*yield*/, fetch_1.default(url, {
                                method: (opts === null || opts === void 0 ? void 0 : opts.destructive) ? 'put' : 'patch',
                                body: JSON.stringify(body),
                                headers: {
                                    Authorization: "Bearer " + this.apiKey,
                                    'Content-Type': 'application/json',
                                },
                            })];
                    case 1:
                        res = _a.sent();
                        return [4 /*yield*/, res.json()];
                    case 2:
                        data = _a.sent();
                        if (!checkError_1.default(res.status)) return [3 /*break*/, 4];
                        if (res.status !== 429) {
                            throw new Error(JSON.stringify(data));
                        }
                        if (!this.retryOnRateLimit) return [3 /*break*/, 4];
                        return [4 /*yield*/, rateLimitHandler_1.default(url, {
                                method: (opts === null || opts === void 0 ? void 0 : opts.destructive) ? 'put' : 'patch',
                                body: JSON.stringify(body),
                                headers: {
                                    Authorization: "Bearer " + this.apiKey,
                                    'Content-Type': 'application/json',
                                },
                            }, this.retryTimeout, this.maxRetry)];
                    case 3: return [2 /*return*/, _a.sent()];
                    case 4: return [2 /*return*/, data];
                    case 5:
                        err_6 = _a.sent();
                        throw new Error(err_6);
                    case 6: return [2 /*return*/];
                }
            });
        }); };
        /**
         * Deletes a record from the specified table.
         * @param table - Table name
         * @param id - Airtable record ID
         * @returns
         * @async
         */
        this.deleteRecord = function (table, id) { return __awaiter(_this, void 0, void 0, function () {
            var url, res, data, err_7;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 5, , 6]);
                        checkArg_1.default(table, 'table', 'string');
                        checkArg_1.default(id, 'id', 'string');
                        url = baseURL + "/" + this.base + "/" + table + "/" + id;
                        return [4 /*yield*/, fetch_1.default(url, {
                                method: 'delete',
                                headers: {
                                    Authorization: "Bearer " + this.apiKey,
                                },
                            })];
                    case 1:
                        res = _a.sent();
                        return [4 /*yield*/, res.json()];
                    case 2:
                        data = _a.sent();
                        if (!checkError_1.default(res.status)) return [3 /*break*/, 4];
                        if (res.status !== 429) {
                            throw new Error(JSON.stringify(data));
                        }
                        if (!this.retryOnRateLimit) return [3 /*break*/, 4];
                        return [4 /*yield*/, rateLimitHandler_1.default(url, {
                                method: 'delete',
                                headers: {
                                    Authorization: "Bearer " + this.apiKey,
                                },
                            }, this.retryTimeout, this.maxRetry)];
                    case 3: return [2 /*return*/, _a.sent()];
                    case 4: return [2 /*return*/, data];
                    case 5:
                        err_7 = _a.sent();
                        throw new Error(err_7);
                    case 6: return [2 /*return*/];
                }
            });
        }); };
        /**
         * Creates multiple new records on the specified table.
         * @param table - Table name
         * @param records - An array of Record objects
         * @param typecast - Used for allowing the ability to add new selections for Select and Multiselect fields.
         * @returns
         * @async
         */
        this.bulkCreate = function (table, records, typecast) { return __awaiter(_this, void 0, void 0, function () {
            var url, body, res, data, err_8;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 5, , 6]);
                        checkArg_1.default(table, 'table', 'string');
                        checkArg_1.default(records, 'records', 'array');
                        checkArg_1.default(typecast, 'typecast', 'boolean', false);
                        url = baseURL + "/" + this.base + "/" + table;
                        body = {
                            records: records.map(function (record) { return ({
                                fields: record,
                            }); }),
                        };
                        if (typecast !== undefined) {
                            body.typecast = typecast;
                        }
                        return [4 /*yield*/, fetch_1.default(url, {
                                method: 'post',
                                body: JSON.stringify(body),
                                headers: {
                                    Authorization: "Bearer " + this.apiKey,
                                    'Content-Type': 'application/json',
                                },
                            })];
                    case 1:
                        res = _a.sent();
                        return [4 /*yield*/, res.json()];
                    case 2:
                        data = _a.sent();
                        if (!checkError_1.default(res.status)) return [3 /*break*/, 4];
                        if (res.status !== 429) {
                            throw new Error(JSON.stringify(data));
                        }
                        if (!this.retryOnRateLimit) return [3 /*break*/, 4];
                        return [4 /*yield*/, rateLimitHandler_1.default(url, {
                                method: 'post',
                                body: JSON.stringify(body),
                                headers: {
                                    Authorization: "Bearer " + this.apiKey,
                                    'Content-Type': 'application/json',
                                },
                            }, this.retryTimeout, this.maxRetry, 'records')];
                    case 3: return [2 /*return*/, _a.sent()];
                    case 4: return [2 /*return*/, data.records];
                    case 5:
                        err_8 = _a.sent();
                        throw new Error(err_8);
                    case 6: return [2 /*return*/];
                }
            });
        }); };
        /**
         * Updates multiple records on the specified table
         * @param table - Table name
         * @param records - An array of Record objects
         * @param opts - An object with options for your update statement
         * @returns
         * @async
         */
        this.bulkUpdate = function (table, records, opts) { return __awaiter(_this, void 0, void 0, function () {
            var url, body, res, data, err_9;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 5, , 6]);
                        checkArg_1.default(table, 'table', 'string');
                        checkArg_1.default(records, 'records', 'array');
                        if (opts) {
                            checkArg_1.default(opts.destructive, 'opts.desctructive', 'boolean', false);
                            checkArg_1.default(opts.typecast, 'opts.typecast', 'boolean', false);
                        }
                        url = baseURL + "/" + this.base + "/" + table;
                        body = { records: records };
                        if ((opts === null || opts === void 0 ? void 0 : opts.typecast) !== undefined) {
                            body.typecast = opts === null || opts === void 0 ? void 0 : opts.typecast;
                        }
                        return [4 /*yield*/, fetch_1.default(url, {
                                method: (opts === null || opts === void 0 ? void 0 : opts.destructive) ? 'put' : 'patch',
                                body: JSON.stringify(body),
                                headers: {
                                    Authorization: "Bearer " + this.apiKey,
                                    'Content-Type': 'application/json',
                                },
                            })];
                    case 1:
                        res = _a.sent();
                        return [4 /*yield*/, res.json()];
                    case 2:
                        data = _a.sent();
                        if (!checkError_1.default(res.status)) return [3 /*break*/, 4];
                        if (res.status !== 429) {
                            throw new Error(JSON.stringify(data));
                        }
                        if (!this.retryOnRateLimit) return [3 /*break*/, 4];
                        return [4 /*yield*/, rateLimitHandler_1.default(url, {
                                method: (opts === null || opts === void 0 ? void 0 : opts.destructive) ? 'put' : 'patch',
                                body: JSON.stringify(body),
                                headers: {
                                    Authorization: "Bearer " + this.apiKey,
                                    'Content-Type': 'application/json',
                                },
                            }, this.retryTimeout, this.maxRetry, 'records')];
                    case 3: return [2 /*return*/, _a.sent()];
                    case 4: return [2 /*return*/, data.records];
                    case 5:
                        err_9 = _a.sent();
                        throw new Error(err_9);
                    case 6: return [2 /*return*/];
                }
            });
        }); };
        /**
         * Deletes multiple records from the specified table
         * @param table - Table name
         * @param ids - Array of Airtable record IDs
         * @returns
         * @async
         */
        this.bulkDelete = function (table, ids) { return __awaiter(_this, void 0, void 0, function () {
            var query_1, url, res, data, err_10;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 5, , 6]);
                        checkArg_1.default(table, 'table', 'string');
                        checkArg_1.default(ids, 'ids', 'array');
                        query_1 = '';
                        ids.forEach(function (id, i) {
                            if (i !== 0) {
                                query_1 = query_1 + "&records[]=" + id;
                            }
                            else {
                                query_1 = "records[]=" + id;
                            }
                        });
                        url = baseURL + "/" + this.base + "/" + table + "?" + encodeURI(query_1);
                        return [4 /*yield*/, fetch_1.default(url, {
                                method: 'delete',
                                headers: {
                                    Authorization: "Bearer " + this.apiKey,
                                },
                            })];
                    case 1:
                        res = _a.sent();
                        return [4 /*yield*/, res.json()];
                    case 2:
                        data = _a.sent();
                        if (!checkError_1.default(res.status)) return [3 /*break*/, 4];
                        if (res.status !== 429) {
                            throw new Error(JSON.stringify(data));
                        }
                        if (!this.retryOnRateLimit) return [3 /*break*/, 4];
                        return [4 /*yield*/, rateLimitHandler_1.default(url, {
                                method: 'delete',
                                headers: {
                                    Authorization: "Bearer " + this.apiKey,
                                },
                            }, this.retryTimeout, this.maxRetry, 'records')];
                    case 3: return [2 /*return*/, _a.sent()];
                    case 4: return [2 /*return*/, data.records];
                    case 5:
                        err_10 = _a.sent();
                        throw new Error(err_10);
                    case 6: return [2 /*return*/];
                }
            });
        }); };
        /**
         * Checks if a record exists, and if it does updates it, if not creates a new record.
         * @param table - Table name
         * @param filterString - The filter formula string used to check for a record
         * @param record - Record object used to either update or create a record
         * @param opts - An object with options for your update statement
         * @returns
         * @async
         */
        this.upsertRecord = function (table, filterString, record, opts) { return __awaiter(_this, void 0, void 0, function () {
            var exists;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        checkArg_1.default(table, 'table', 'string');
                        checkArg_1.default(filterString, 'filterString', 'string');
                        checkArg_1.default(record, 'record', 'object');
                        if (opts) {
                            checkArg_1.default(opts.destructive, 'opts.desctructive', 'boolean', false);
                            checkArg_1.default(opts.typecast, 'opts.typecast', 'boolean', false);
                        }
                        return [4 /*yield*/, this.select(table, { filterByFormula: filterString })];
                    case 1:
                        exists = _a.sent();
                        if (!!exists[0]) return [3 /*break*/, 3];
                        return [4 /*yield*/, this.createRecord(table, record, opts === null || opts === void 0 ? void 0 : opts.typecast)];
                    case 2: return [2 /*return*/, _a.sent()];
                    case 3: return [4 /*yield*/, this.updateRecord(table, {
                            id: exists[0].id,
                            fields: record,
                        }, opts)];
                    case 4: return [2 /*return*/, _a.sent()];
                }
            });
        }); };
        if (!apiKey)
            throw new Error('API Key is required.');
        if (!base)
            throw new Error('Base ID is required.');
        this.apiKey = apiKey;
        this.base = base;
        this.retryOnRateLimit = (config === null || config === void 0 ? void 0 : config.retryOnRateLimit) || true;
        this.retryTimeout = (config === null || config === void 0 ? void 0 : config.retryTimeout) || 5000;
        this.maxRetry = (config === null || config === void 0 ? void 0 : config.maxRetry) || 60000;
    }
    return AsyncAirtable;
}());
if (typeof window !== 'undefined') {
    window.AsyncAirtable = AsyncAirtable;
}
module.exports = AsyncAirtable;


/***/ }),

/***/ 368:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
var queryBuilder_1 = __webpack_require__(244);
exports.default = (function (opts) {
    if (Object.prototype.hasOwnProperty.call(opts, 'filterByFormula') &&
        Object.prototype.hasOwnProperty.call(opts, 'where'))
        throw new Error('Cannot use both where and filterByFormula as they accomplish the same thing');
    var params = Object.keys(opts)
        .map(function (key, i) {
        /** @todo Find a better type than any for this */
        // eslint-disable-next-line @typescript-eslint/no-explicit-any
        var opt = opts[key];
        var formatted;
        if (Array.isArray(opt)) {
            formatted = opt
                .map(function (item, j) {
                switch (typeof item) {
                    case 'object':
                        return Object.keys(item)
                            .map(function (subKey) {
                            return key + "[" + j + "][" + subKey + "]=" + item[subKey];
                        })
                            .join('&');
                    case 'string':
                        return key + "[]=" + item;
                }
            })
                .join('&');
        }
        else {
            if (key === 'where') {
                formatted = "filterByFormula=" + queryBuilder_1.default(opt);
            }
            else {
                formatted = key + "=" + opt;
            }
        }
        return i !== 0 ? "&" + formatted : formatted;
    })
        .join('');
    return encodeURI(params);
});


/***/ }),

/***/ 917:
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.default = (function (arg, name, type, required) {
    if (required === void 0) { required = true; }
    if (arg === undefined && required)
        throw new Error("Argument \"" + name + "\" is required.");
    if (arg === undefined && !required)
        return;
    if (typeof arg !== type) {
        if (type === 'array' && Array.isArray(arg))
            return;
        throw new Error("Incorrect data type on argument \"" + name + "\". Received \"" + typeof arg + "\": expected \"" + type + "\"");
    }
});


/***/ }),

/***/ 320:
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.default = (function (status) { return status >= 300; });


/***/ }),

/***/ 276:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
var nodeFetch = __webpack_require__(300);
exports.default = typeof window !== 'undefined'
    ? window.fetch.bind(window)
    : nodeFetch;


/***/ }),

/***/ 244:
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.baseHandler = exports.booleanHandler = exports.logicalOperators = exports.numericalOperators = exports.buildExpression = exports.isQueryObject = void 0;
var operators = ['=', '!=', '>', '>=', '<', '<='];
var isQueryObject = function (item) {
    if (item === undefined)
        throw new Error('Missing Query Object');
    var types = ['string', 'number', 'boolean'];
    return item !== null && !types.includes(typeof item);
};
exports.isQueryObject = isQueryObject;
var buildExpression = function (obj, op) {
    if (typeof obj !== 'object' || Array.isArray(obj))
        throw new Error('Missing or Invalid Comparison Object');
    if (typeof op !== 'string' && !operators.includes(op))
        throw new Error('Missing or Invalid Comparison Operator');
    var keys = Object.keys(obj);
    var expressionMapper = function (k, i) {
        var val = exports.baseHandler(obj[k]);
        return "{" + k + "} " + op + " " + val + (i < keys.length - 1 ? ', ' : '');
    };
    var exp = "" + keys.map(expressionMapper).join('');
    return keys.length > 1 ? "AND(" + exp + ")" : exp;
};
exports.buildExpression = buildExpression;
exports.numericalOperators = {
    $gt: function (val) {
        return exports.buildExpression(val, '>');
    },
    $lt: function (val) {
        return exports.buildExpression(val, '<');
    },
    $gte: function (val) {
        return exports.buildExpression(val, '>=');
    },
    $lte: function (val) {
        return exports.buildExpression(val, '<=');
    },
    $eq: function (val) {
        return exports.buildExpression(val, '=');
    },
    $neq: function (val) {
        return exports.buildExpression(val, '!=');
    },
};
exports.logicalOperators = {
    $not: function (expression) { return "NOT(" + queryBuilder(expression) + ")"; },
    $and: function (args) {
        var str = 'AND(';
        args.forEach(function (arg, i) {
            str += queryBuilder(arg);
            if (i < args.length - 1) {
                str += ', ';
            }
        });
        return str + ')';
    },
    $or: function (args) {
        var str = 'OR(';
        args.forEach(function (arg, i) {
            str += queryBuilder(arg);
            if (i < args.length - 1) {
                str += ', ';
            }
        });
        return str + ')';
    },
};
var booleanHandler = function (bool) {
    if (typeof bool !== 'boolean') {
        throw new Error('Invalid type');
    }
    return bool ? 'TRUE()' : 'FALSE()';
};
exports.booleanHandler = booleanHandler;
var baseHandler = function (val) {
    if (val === null) {
        return 'BLANK()';
    }
    switch (typeof val) {
        case 'number':
            return "" + val;
        case 'string':
            return "'" + val + "'";
        case 'boolean':
            return exports.booleanHandler(val);
        default:
            throw new Error('Wrong Type');
    }
};
exports.baseHandler = baseHandler;
var queryBuilder = function (query) {
    var formulaString = '';
    if (Object.keys(query).length > 1) {
        formulaString += exports.logicalOperators.$and(Object.keys(query).map(function (k) {
            var _a;
            return (_a = {}, _a[k] = query[k], _a);
        }));
    }
    else {
        for (var key in query) {
            var current = query[key];
            if (key in exports.numericalOperators && exports.isQueryObject(current)) {
                formulaString += exports.numericalOperators[key](current);
            }
            else if (key in exports.logicalOperators &&
                (exports.isQueryObject(current) || Array.isArray(current))) {
                formulaString += exports.logicalOperators[key](current);
            }
            else {
                formulaString += exports.buildExpression(query, '=');
            }
        }
    }
    return formulaString;
};
exports.default = queryBuilder;


/***/ }),

/***/ 682:
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
var fetch_1 = __webpack_require__(276);
exports.default = (function (url, opts, retryTimeout, maxRetry, key) { return __awaiter(void 0, void 0, void 0, function () {
    return __generator(this, function (_a) {
        return [2 /*return*/, new Promise(function (resolve, reject) {
                var retryRateLimit = function (url, opts, retryTimeout, maxRetry, key) {
                    if (maxRetry && maxRetry < 1) {
                        reject('Max timeout exceeded');
                    }
                    setTimeout(function () { return __awaiter(void 0, void 0, void 0, function () {
                        var res, data, err_1;
                        return __generator(this, function (_a) {
                            switch (_a.label) {
                                case 0:
                                    _a.trys.push([0, 3, , 4]);
                                    return [4 /*yield*/, fetch_1.default(url, opts)];
                                case 1:
                                    res = _a.sent();
                                    return [4 /*yield*/, res.json()];
                                case 2:
                                    data = _a.sent();
                                    if (res.status === 429) {
                                        return [2 /*return*/, retryRateLimit(url, opts, retryTimeout * 1.5, maxRetry - retryTimeout, key)];
                                    }
                                    if (key) {
                                        resolve(data[key]);
                                    }
                                    else {
                                        resolve(data);
                                    }
                                    return [3 /*break*/, 4];
                                case 3:
                                    err_1 = _a.sent();
                                    reject(err_1);
                                    return [3 /*break*/, 4];
                                case 4: return [2 /*return*/];
                            }
                        });
                    }); }, retryTimeout);
                };
                retryRateLimit(url, opts, retryTimeout, maxRetry, key);
            })];
    });
}); });


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		if(__webpack_module_cache__[moduleId]) {
/******/ 			return __webpack_module_cache__[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	// startup
/******/ 	// Load entry module
/******/ 	// This entry module is referenced by other modules so it can't be inlined
/******/ 	__webpack_require__(759);
/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hc3luY2FpcnRhYmxlLy4vbm9kZV9tb2R1bGVzL25vZGUtZmV0Y2gvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly9hc3luY2FpcnRhYmxlLy4vc3JjL2FzeW5jQWlydGFibGUudHMiLCJ3ZWJwYWNrOi8vYXN5bmNhaXJ0YWJsZS8uL3NyYy9idWlsZE9wdHMudHMiLCJ3ZWJwYWNrOi8vYXN5bmNhaXJ0YWJsZS8uL3NyYy9jaGVja0FyZy50cyIsIndlYnBhY2s6Ly9hc3luY2FpcnRhYmxlLy4vc3JjL2NoZWNrRXJyb3IudHMiLCJ3ZWJwYWNrOi8vYXN5bmNhaXJ0YWJsZS8uL3NyYy9mZXRjaC50cyIsIndlYnBhY2s6Ly9hc3luY2FpcnRhYmxlLy4vc3JjL3F1ZXJ5QnVpbGRlci50cyIsIndlYnBhY2s6Ly9hc3luY2FpcnRhYmxlLy4vc3JjL3JhdGVMaW1pdEhhbmRsZXIudHMiLCJ3ZWJwYWNrOi8vYXN5bmNhaXJ0YWJsZS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9hc3luY2FpcnRhYmxlL3dlYnBhY2svc3RhcnR1cCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxhQUFhO0FBQ2hELHFDQUFxQyxlQUFlO0FBQ3BELHFDQUFxQyxlQUFlO0FBQ3BEO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLENBQUMsZUFBZTtBQUNoQjs7QUFFQSxlQUFlO0FBQ2YsZUFBZTtBQUNmLGdCQUFnQixtQjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3hCaEIsdUNBQTRCO0FBQzVCLDJDQUFvQztBQUNwQyw0Q0FBc0M7QUFDdEMsMENBQWtDO0FBQ2xDLGtEQUFrRDtBQUNsRCxJQUFNLE9BQU8sR0FBRyw2QkFBNkIsQ0FBQztBQXVCOUMsSUFBTSxZQUFZLEdBQWE7SUFDN0IsUUFBUTtJQUNSLGlCQUFp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RyxFQUNsQixRQUFRLEdBQUcsWUFBWSxFQUN2QixHQUFHLENBQ0osRUFBQztxQ0FDSDtvQ0FDRCxJQUFJLEdBQUcsRUFBRTt3Q0FDUCxPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7cUNBQ3BCO3lDQUFNO3dDQUNMLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztxQ0FDZjs7OztvQ0FFRCxNQUFNLENBQUMsS0FBRyxDQUFDLENBQUM7Ozs7O3lCQUVmLEVBQUUsWUFBWSxDQUFDLENBQUM7Z0JBQ25CLENBQUMsQ0FBQztnQkFFRixjQUFjLENBQUMsR0FBRyxFQUFFLElBQUksRUFBRSxZQUFZLEVBQUUsUUFBUSxFQUFFLEdBQUcsQ0FBQyxDQUFDO1lBQ3pELENBQUMsQ0FBQyxFQUFDOztLQUNKLEVBQUM7Ozs7Ozs7VUMvQ0Y7VUFDQTs7VUFFQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7O1VBRUE7VUFDQTs7VUFFQTtVQUNBO1VBQ0E7OztVQ3JCQTtVQUNBO1VBQ0E7VUFDQSIsImZpbGUiOiJhc3luY0FpcnRhYmxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8vIHJlZjogaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtZ2xvYmFsXG52YXIgZ2V0R2xvYmFsID0gZnVuY3Rpb24gKCkge1xuXHQvLyB0aGUgb25seSByZWxpYWJsZSBtZWFucyB0byBnZXQgdGhlIGdsb2JhbCBvYmplY3QgaXNcblx0Ly8gYEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKClgXG5cdC8vIEhvd2V2ZXIsIHRoaXMgY2F1c2VzIENTUCB2aW9sYXRpb25zIGluIENocm9tZSBhcHBzLlxuXHRpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnKSB7IHJldHVybiBzZWxmOyB9XG5cdGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykgeyByZXR1cm4gd2luZG93OyB9XG5cdGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykgeyByZXR1cm4gZ2xvYmFsOyB9XG5cdHRocm93IG5ldyBFcnJvcigndW5hYmxlIHRvIGxvY2F0ZSBnbG9iYWwgb2JqZWN0Jyk7XG59XG5cbnZhciBnbG9iYWwgPSBnZXRHbG9iYWwoKTtcblxubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzID0gZ2xvYmFsLmZldGNoO1xuXG4vLyBOZWVkZWQgZm9yIFR5cGVTY3JpcHQgYW5kIFdlYnBhY2suXG5pZiAoZ2xvYmFsLmZldGNoKSB7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IGdsb2JhbC5mZXRjaC5iaW5kKGdsb2JhbCk7XG59XG5cbmV4cG9ydHMuSGVhZGVycyA9IGdsb2JhbC5IZWFkZXJzO1xuZXhwb3J0cy5SZXF1ZXN0ID0gZ2xvYmFsLlJlcXVlc3Q7XG5leHBvcnRzLlJlc3BvbnNlID0gZ2xvYmFsLlJlc3BvbnNlOyIsImltcG9ydCBmZXRjaCBmcm9tICcuL2ZldGNoJztcbmltcG9ydCBidWlsZE9wdHMgZnJvbSAnLi9idWlsZE9wdHMnO1xuaW1wb3J0IGNoZWNrRXJyb3IgZnJvbSAnLi9jaGVja0Vycm9yJztcbmltcG9ydCBjaGVja0FyZyBmcm9tICcuL2NoZWNrQXJnJztcbmltcG9ydCByYXRlTGltaXRIYW5kbGVyIGZyb20gJy4vcmF0ZUxpbWl0SGFuZGxlcic7XG5jb25zdCBiYXNlVVJMID0gJ2h0dHBzOi8vYXBpLmFpcnRhYmxlLmNvbS92MCc7XG5pbXBvcnQge1xuICBTZWxlY3RPcHRpb25zLFxuICBBaXJ0YWJsZURlbGV0ZWRSZXNwb25zZSxcbiAgQWlydGFibGVSZWNvcmQsXG4gIEFpcnRhYmxlUmVjb3JkUmVzcG9uc2UsXG4gIEFpcnRhYmxlVXBkYXRlUmVjb3JkLFxuICBEZWxldGVSZXNwb25zZSxcbiAgRmllbGRzLFxuICBDb25maWcsXG4gIHF1ZXJ5Qm9keSxcbiAgVHlwZWNhc3QsXG4gIHVwZGF0ZU9wdHMsXG4gIGJ1bGtRdWVyeUJvZHksXG59IGZyb20gJy4vQHR5cGVzJztcblxuLyoqIEBpZ25vcmUgKi9cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIFdpbmRvdyB7XG4gICAgQXN5bmNBaXJ0YWJsZTogdHlwZW9mIEFzeW5jQWlydGFibGU7XG4gIH1cbn1cblxuY29uc3QgdmFsaWRPcHRpb25zOiBzdHJpbmdbXSA9IFtcbiAgJ2ZpZWxkcycsXG4gICdmaWx0ZXJCeUZvcm11bGEnLFxuICAnbWF4UmVjb3JkcycsXG4gICdwYWdlU2l6ZScsXG4gICdzb3J0JyxcbiAgJ3ZpZXcnLFxuICAnd2hlcmUnLFxuXTtcblxuLyoqXG4gKiBUaGUgbWFpbiBBc3luY0FpcnRhYmxlIGNsYXNzLlxuICovXG5jbGFzcyBBc3luY0FpcnRhYmxlIHtcbiAgLyoqXG4gICAqIEBkZWZhdWx0PXRydWVcbiAgICogVGhpcyBkZWNpZGVzIHdoZXRoZXIgb3Igbm90IHRoZSBsaWJyYXJ5IHdpbGxcbiAgICogaGFuZGxlIHJldHJ5aW5nIGEgcmVxdWVzdCB3aGVuIHJhdGUgbGltaXRlZFxuICAgKi9cbiAgcmV0cnlPblJhdGVMaW1pdDogYm9vbGVhbjtcbiAgLyoqXG4gICAqIEBkZWZhdWx0PTYwMDAwXG4gICAqIFRoZSBtYXhtaXVtIGFtb3VudCBvZiB0aW1lIGJlZm9yZSB0aGVcbiAgICogbGlicmFyeSB3aWxsIHN0b3AgcmV0cnlpbmcgYW5kIHRpbWVvdXQgd2hlbiByYXRlIGxpbWl0ZWRcbiAgICovXG4gIG1heFJldHJ5OiBudW1iZXI7XG4gIC8qKlxuICAgKiBAZGVmYXVsdD01MDAwXG4gICAqIFRoZSBzdGFydGluZyB0aW1lb3V0IGZvciB0aGUgcmV0cnkuIFRoaXMgd2lsbCBnZXQgNTAlXG4gICAqIGxhcmdlciB3aXRoIGVhY2ggdHJ5IHVudGlsIHlvdSBoaXQgdGhlIG1heFJldHJ5IGFtb3VudFxuICAgKi9cbiAgcmV0cnlUaW1lb3V0OiBudW1iZXI7XG4gIC8qKiBUaGUgQVBJIEtleSBmcm9tIEFpclRhYmxlICovXG4gIGFwaUtleTogc3RyaW5nO1xuICAvKiogVGhlIGJhc2UgaWQgZnJvbSBBaXJUYWJsZSAqL1xuICBiYXNlOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIEFzeW5jQWlydGFibGUgbGlicmFyeS5cbiAgICogQHBhcmFtIGFwaUtleSBUaGUgQVBJIEtleSBmcm9tIEFpclRhYmxlXG4gICAqIEBwYXJhbSBiYXNlIFRoZSBiYXNlIGlkIGZyb20gQWlyVGFibGVcbiAgICogQHBhcmFtIGNvbmZpZyBUaGUgY29uZmlnIHRvIHVzZSBmb3IgdGhpcyBpbnN0YW5jZSBvZiBBc3luY0FpcnRhYmxlXG4gICAqL1xuICBjb25zdHJ1Y3RvcihhcGlLZXk6IHN0cmluZywgYmFzZTogc3RyaW5nLCBjb25maWc/OiBDb25maWcpIHtcbiAgICBpZiAoIWFwaUtleSkgdGhyb3cgbmV3IEVycm9yKCdBUEkgS2V5IGlzIHJlcXVpcmVkLicpO1xuICAgIGlmICghYmFzZSkgdGhyb3cgbmV3IEVycm9yKCdCYXNlIElEIGlzIHJlcXVpcmVkLicpO1xuICAgIHRoaXMuYXBpS2V5ID0gYXBpS2V5O1xuICAgIHRoaXMuYmFzZSA9IGJhc2U7XG4gICAgdGhpcy5yZXRyeU9uUmF0ZUxpbWl0ID0gY29uZmlnPy5yZXRyeU9uUmF0ZUxpbWl0IHx8IHRydWU7XG4gICAgdGhpcy5yZXRyeVRpbWVvdXQgPSBjb25maWc/LnJldHJ5VGltZW91dCB8fCA1MDAwO1xuICAgIHRoaXMubWF4UmV0cnkgPSBjb25maWc/Lm1heFJldHJ5IHx8IDYwMDAwO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbGVjdCByZWNvcmQocykgZnJvbSB0aGUgc3BlY2lmaWVkIHRhYmxlLlxuICAgKiBAcGFyYW0gdGFibGUgVGFibGUgbmFtZVxuICAgKiBAcGFyYW0gb3B0aW9ucyBPcHRpb25zIG9iamVjdCwgdXNlZCB0byBmaWx0ZXIgcmVjb3Jkc1xuICAgKiBAcGFyYW0gcGFnZSBVc2VkIHRvIGdldCBhIHNwZWNpZmljIHBhZ2Ugb2YgcmVjb3Jkc1xuICAgKiBAcmV0dXJuc1xuICAgKiBAYXN5bmNcbiAgICovXG4gIHNlbGVjdCA9IGFzeW5jIChcbiAgICB0YWJsZTogc3RyaW5nLFxuICAgIG9wdGlvbnM/OiBTZWxlY3RPcHRpb25zLFxuICAgIHBhZ2U/OiBudW1iZXIsXG4gICk6IFByb21pc2U8QWlydGFibGVSZWNvcmRbXT4gPT4ge1xuICAgIHRyeSB7XG4gICAgICBjaGVja0FyZyh0YWJsZSwgJ3RhYmxlJywgJ3N0cmluZycpO1xuICAgICAgY2hlY2tBcmcob3B0aW9ucywgJ29wdGlvbnMnLCAnb2JqZWN0JywgZmFsc2UpO1xuICAgICAgY2hlY2tBcmcocGFnZSwgJ3BhZ2UnLCAnbnVtYmVyJywgZmFsc2UpO1xuICAgICAgY29uc3QgdXJsID0gYCR7YmFzZVVSTH0vJHt0aGlzLmJhc2V9LyR7dGFibGV9YDtcbiAgICAgIGNvbnN0IG9wdHM6IFNlbGVjdE9wdGlvbnMgPSBvcHRpb25zID8geyAuLi5vcHRpb25zIH0gOiB7fTtcbiAgICAgIE9iamVjdC5rZXlzKG9wdHMpLmZvckVhY2goKG9wdGlvbikgPT4ge1xuICAgICAgICBpZiAoIXZhbGlkT3B0aW9ucy5pbmNsdWRlcyhvcHRpb24pKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIG9wdGlvbjogJHtvcHRpb259YCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgbGV0IG9mZnNldDogc3RyaW5nIHwgdW5kZWZpbmVkID0gJyc7XG4gICAgICBsZXQgZGF0YTogQWlydGFibGVSZWNvcmRbXSA9IFtdO1xuICAgICAgaWYgKHBhZ2UpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYWdlOyBpKyspIHtcbiAgICAgICAgICBpZiAob2Zmc2V0KSB7XG4gICAgICAgICAgICBvcHRzLm9mZnNldCA9IG9mZnNldDtcbiAgICAgICAgICB9XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlczogUmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHt1cmx9PyR7YnVpbGRPcHRzKG9wdHMpfWAsIHtcbiAgICAgICAgICAgICAgaGVhZGVyczogeyBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy5hcGlLZXl9YCB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBib2R5OiBBaXJ0YWJsZVJlY29yZFJlc3BvbnNlID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgICAgICAgIGlmIChjaGVja0Vycm9yKHJlcy5zdGF0dXMpKSB7XG4gICAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzICE9PSA0MjkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoSlNPTi5zdHJpbmdpZnkoYm9keSkpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKHRoaXMucmV0cnlPblJhdGVMaW1pdCkge1xuICAgICAgICAgICAgICAgIGlmIChpICsgMSA9PT0gcGFnZSkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHJhdGVMaW1pdEhhbmRsZXIoXG4gICAgICAgICAgICAgICAgICAgIGAke3VybH0/JHtidWlsZE9wdHMob3B0cyl9YCxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuYXBpS2V5fWAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXRyeVRpbWVvdXQsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWF4UmV0cnksXG4gICAgICAgICAgICAgICAgICAgICdyZWNvcmRzJyxcbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaSArIDEgPT09IHBhZ2UpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGJvZHkucmVjb3JkcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9mZnNldCA9IGJvZHkub2Zmc2V0O1xuICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsZXQgZG9uZSA9IGZhbHNlO1xuICAgICAgICB3aGlsZSAoIWRvbmUpIHtcbiAgICAgICAgICBpZiAob2Zmc2V0KSB7XG4gICAgICAgICAgICBvcHRzLm9mZnNldCA9IG9mZnNldDtcbiAgICAgICAgICB9XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlczogUmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHt1cmx9PyR7YnVpbGRPcHRzKG9wdHMpfWAsIHtcbiAgICAgICAgICAgICAgaGVhZGVyczogeyBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy5hcGlLZXl9YCB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBib2R5OiBBaXJ0YWJsZVJlY29yZFJlc3BvbnNlID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgICAgICAgIGlmIChjaGVja0Vycm9yKHJlcy5zdGF0dXMpKSB7XG4gICAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzICE9PSA0MjkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoSlNPTi5zdHJpbmdpZnkoYm9keSkpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKHRoaXMucmV0cnlPblJhdGVMaW1pdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCByYXRlTGltaXRIYW5kbGVyKFxuICAgICAgICAgICAgICAgICAgYCR7dXJsfT8ke2J1aWxkT3B0cyhvcHRzKX1gLFxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLmFwaUtleX1gIH0sXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgdGhpcy5yZXRyeVRpbWVvdXQsXG4gICAgICAgICAgICAgICAgICB0aGlzLm1heFJldHJ5LFxuICAgICAgICAgICAgICAgICAgJ3JlY29yZHMnLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRhdGEgPSBkYXRhLmNvbmNhdChib2R5LnJlY29yZHMpO1xuICAgICAgICAgICAgb2Zmc2V0ID0gYm9keS5vZmZzZXQ7XG4gICAgICAgICAgICBpZiAoIWJvZHkub2Zmc2V0KSB7XG4gICAgICAgICAgICAgIGRvbmUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihlcnIpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogRmluZHMgYSByZWNvcmQgb24gdGhlIHNwZWNpZmllZCB0YWJsZS5cbiAgICogQHBhcmFtIHRhYmxlIFRhYmxlIG5hbWVcbiAgICogQHBhcmFtIGlkIEFpcnRhYmxlIHJlY29yZCBJRFxuICAgKiBAcmV0dXJuc1xuICAgKiBAYXN5bmNcbiAgICovXG4gIGZpbmQgPSBhc3luYyAodGFibGU6IHN0cmluZywgaWQ6IHN0cmluZyk6IFByb21pc2U8QWlydGFibGVSZWNvcmQ+ID0+IHtcbiAgICB0cnkge1xuICAgICAgY2hlY2tBcmcodGFibGUsICd0YWJsZScsICdzdHJpbmcnKTtcbiAgICAgIGNoZWNrQXJnKGlkLCAnaWQnLCAnc3RyaW5nJyk7XG4gICAgICBjb25zdCB1cmwgPSBgJHtiYXNlVVJMfS8ke3RoaXMuYmFzZX0vJHt0YWJsZX0vJHtpZH1gO1xuICAgICAgY29uc3QgcmVzOiBSZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgICBoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLmFwaUtleX1gIH0sXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IGRhdGE6IEFpcnRhYmxlUmVjb3JkID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgIGlmIChjaGVja0Vycm9yKHJlcy5zdGF0dXMpKSB7XG4gICAgICAgIGlmIChyZXMuc3RhdHVzICE9PSA0MjkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMucmV0cnlPblJhdGVMaW1pdCkge1xuICAgICAgICAgIHJldHVybiBhd2FpdCByYXRlTGltaXRIYW5kbGVyKFxuICAgICAgICAgICAgdXJsLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLmFwaUtleX1gIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGhpcy5yZXRyeVRpbWVvdXQsXG4gICAgICAgICAgICB0aGlzLm1heFJldHJ5LFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGVycik7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IHJlY29yZCBvbiB0aGUgc3BlY2lmaWVkIHRhYmxlLlxuICAgKiBAcGFyYW0gdGFibGUgLSBUYWJsZSBuYW1lXG4gICAqIEBwYXJhbSByZWNvcmQgLSBSZWNvcmQgb2JqZWN0LCB1c2VkIHRvIHN0cnVjdHVyZSBkYXRhIGZvciBpbnNlcnRcbiAgICogQHBhcmFtIHR5cGVjYXN0IC0gVXNlZCBmb3IgYWxsb3dpbmcgdGhlIGFiaWxpdHkgdG8gYWRkIG5ldyBzZWxlY3Rpb25zIGZvciBTZWxlY3QgYW5kIE11bHRpc2VsZWN0IGZpZWxkcy5cbiAgICogQHJldHVybnNcbiAgICogQGFzeW5jXG4gICAqL1xuICBjcmVhdGVSZWNvcmQgPSBhc3luYyAoXG4gICAgdGFibGU6IHN0cmluZyxcbiAgICByZWNvcmQ6IEZpZWxkcyxcbiAgICB0eXBlY2FzdD86IFR5cGVjYXN0LFxuICApOiBQcm9taXNlPEFpcnRhYmxlUmVjb3JkPiA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNoZWNrQXJnKHRhYmxlLCAndGFibGUnLCAnc3RyaW5nJyk7XG4gICAgICBjaGVja0FyZyhyZWNvcmQsICdyZWNvcmQnLCAnb2JqZWN0Jyk7XG4gICAgICBjaGVja0FyZyh0eXBlY2FzdCwgJ3R5cGVjYXN0JywgJ2Jvb2xlYW4nLCBmYWxzZSk7XG4gICAgICBjb25zdCB1cmwgPSBgJHtiYXNlVVJMfS8ke3RoaXMuYmFzZX0vJHt0YWJsZX1gO1xuICAgICAgY29uc3QgYm9keTogcXVlcnlCb2R5ID0geyBmaWVsZHM6IHJlY29yZCB9O1xuICAgICAgaWYgKHR5cGVjYXN0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgYm9keS50eXBlY2FzdCA9IHR5cGVjYXN0O1xuICAgICAgfVxuICAgICAgY29uc3QgcmVzOiBSZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgICBtZXRob2Q6ICdwb3N0JyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSksXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy5hcGlLZXl9YCxcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgICBjb25zdCBkYXRhOiBBaXJ0YWJsZVJlY29yZCA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICBpZiAoY2hlY2tFcnJvcihyZXMuc3RhdHVzKSkge1xuICAgICAgICBpZiAocmVzLnN0YXR1cyAhPT0gNDI5KSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnJldHJ5T25SYXRlTGltaXQpIHtcbiAgICAgICAgICByZXR1cm4gYXdhaXQgcmF0ZUxpbWl0SGFuZGxlcihcbiAgICAgICAgICAgIHVybCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgbWV0aG9kOiAncG9zdCcsXG4gICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpLFxuICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuYXBpS2V5fWAsXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0aGlzLnJldHJ5VGltZW91dCxcbiAgICAgICAgICAgIHRoaXMubWF4UmV0cnksXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgYSByZWNvcmQgb24gdGhlIHNwZWNpZmllZCB0YWJsZS5cbiAgICogQHBhcmFtIHRhYmxlIC0gVGFibGUgbmFtZVxuICAgKiBAcGFyYW0gcmVjb3JkIC0gUmVjb3JkIG9iamVjdCwgdXNlZCB0byB1cGRhdGUgZGF0YSB3aXRoaW4gYSBzcGVjaWZpYyByZWNvcmRcbiAgICogQHBhcmFtIG9wdHMgLSBBbiBvYmplY3Qgd2l0aCBvcHRpb25zIGZvciB5b3VyIHVwZGF0ZSBzdGF0ZW1lbnRcbiAgICogQHJldHVybnNcbiAgICogQGFzeW5jXG4gICAqL1xuICB1cGRhdGVSZWNvcmQgPSBhc3luYyAoXG4gICAgdGFibGU6IHN0cmluZyxcbiAgICByZWNvcmQ6IEFpcnRhYmxlVXBkYXRlUmVjb3JkLFxuICAgIG9wdHM/OiB1cGRhdGVPcHRzLFxuICApOiBQcm9taXNlPEFpcnRhYmxlUmVjb3JkPiA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNoZWNrQXJnKHRhYmxlLCAndGFibGUnLCAnc3RyaW5nJyk7XG4gICAgICBjaGVja0FyZyhyZWNvcmQsICdyZWNvcmQnLCAnb2JqZWN0Jyk7XG4gICAgICBpZiAob3B0cykge1xuICAgICAgICBjaGVja0FyZyhvcHRzLmRlc3RydWN0aXZlLCAnb3B0cy5kZXNjdHJ1Y3RpdmUnLCAnYm9vbGVhbicpO1xuICAgICAgICBjaGVja0FyZyhvcHRzLnR5cGVjYXN0LCAnb3B0cy50eXBlY2FzdCcsICdib29sZWFuJywgZmFsc2UpO1xuICAgICAgfVxuICAgICAgY29uc3QgdXJsID0gYCR7YmFzZVVSTH0vJHt0aGlzLmJhc2V9LyR7dGFibGV9LyR7cmVjb3JkLmlkfWA7XG4gICAgICBjb25zdCBib2R5OiBxdWVyeUJvZHkgPSB7IGZpZWxkczogcmVjb3JkLmZpZWxkcyB9O1xuICAgICAgaWYgKG9wdHM/LnR5cGVjYXN0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgYm9keS50eXBlY2FzdCA9IG9wdHM/LnR5cGVjYXN0O1xuICAgICAgfVxuICAgICAgY29uc3QgcmVzOiBSZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgICBtZXRob2Q6IG9wdHM/LmRlc3RydWN0aXZlID8gJ3B1dCcgOiAncGF0Y2gnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLmFwaUtleX1gLFxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IGRhdGE6IEFpcnRhYmxlUmVjb3JkID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgIGlmIChjaGVja0Vycm9yKHJlcy5zdGF0dXMpKSB7XG4gICAgICAgIGlmIChyZXMuc3RhdHVzICE9PSA0MjkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMucmV0cnlPblJhdGVMaW1pdCkge1xuICAgICAgICAgIHJldHVybiBhd2FpdCByYXRlTGltaXRIYW5kbGVyKFxuICAgICAgICAgICAgdXJsLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBtZXRob2Q6IG9wdHM/LmRlc3RydWN0aXZlID8gJ3B1dCcgOiAncGF0Y2gnLFxuICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSxcbiAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLmFwaUtleX1gLFxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGhpcy5yZXRyeVRpbWVvdXQsXG4gICAgICAgICAgICB0aGlzLm1heFJldHJ5LFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGVycik7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBEZWxldGVzIGEgcmVjb3JkIGZyb20gdGhlIHNwZWNpZmllZCB0YWJsZS5cbiAgICogQHBhcmFtIHRhYmxlIC0gVGFibGUgbmFtZVxuICAgKiBAcGFyYW0gaWQgLSBBaXJ0YWJsZSByZWNvcmQgSURcbiAgICogQHJldHVybnNcbiAgICogQGFzeW5jXG4gICAqL1xuICBkZWxldGVSZWNvcmQgPSBhc3luYyAodGFibGU6IHN0cmluZywgaWQ6IHN0cmluZyk6IFByb21pc2U8RGVsZXRlUmVzcG9uc2U+ID0+IHtcbiAgICB0cnkge1xuICAgICAgY2hlY2tBcmcodGFibGUsICd0YWJsZScsICdzdHJpbmcnKTtcbiAgICAgIGNoZWNrQXJnKGlkLCAnaWQnLCAnc3RyaW5nJyk7XG4gICAgICBjb25zdCB1cmwgPSBgJHtiYXNlVVJMfS8ke3RoaXMuYmFzZX0vJHt0YWJsZX0vJHtpZH1gO1xuICAgICAgY29uc3QgcmVzOiBSZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgICBtZXRob2Q6ICdkZWxldGUnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuYXBpS2V5fWAsXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IGRhdGE6IERlbGV0ZVJlc3BvbnNlID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgIGlmIChjaGVja0Vycm9yKHJlcy5zdGF0dXMpKSB7XG4gICAgICAgIGlmIChyZXMuc3RhdHVzICE9PSA0MjkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMucmV0cnlPblJhdGVMaW1pdCkge1xuICAgICAgICAgIHJldHVybiBhd2FpdCByYXRlTGltaXRIYW5kbGVyKFxuICAgICAgICAgICAgdXJsLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBtZXRob2Q6ICdkZWxldGUnLFxuICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuYXBpS2V5fWAsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGhpcy5yZXRyeVRpbWVvdXQsXG4gICAgICAgICAgICB0aGlzLm1heFJldHJ5LFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGVycik7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIG11bHRpcGxlIG5ldyByZWNvcmRzIG9uIHRoZSBzcGVjaWZpZWQgdGFibGUuXG4gICAqIEBwYXJhbSB0YWJsZSAtIFRhYmxlIG5hbWVcbiAgICogQHBhcmFtIHJlY29yZHMgLSBBbiBhcnJheSBvZiBSZWNvcmQgb2JqZWN0c1xuICAgKiBAcGFyYW0gdHlwZWNhc3QgLSBVc2VkIGZvciBhbGxvd2luZyB0aGUgYWJpbGl0eSB0byBhZGQgbmV3IHNlbGVjdGlvbnMgZm9yIFNlbGVjdCBhbmQgTXVsdGlzZWxlY3QgZmllbGRzLlxuICAgKiBAcmV0dXJuc1xuICAgKiBAYXN5bmNcbiAgICovXG4gIGJ1bGtDcmVhdGUgPSBhc3luYyAoXG4gICAgdGFibGU6IHN0cmluZyxcbiAgICByZWNvcmRzOiBGaWVsZHNbXSxcbiAgICB0eXBlY2FzdD86IFR5cGVjYXN0LFxuICApOiBQcm9taXNlPEFpcnRhYmxlUmVjb3JkW10+ID0+IHtcbiAgICB0cnkge1xuICAgICAgY2hlY2tBcmcodGFibGUsICd0YWJsZScsICdzdHJpbmcnKTtcbiAgICAgIGNoZWNrQXJnKHJlY29yZHMsICdyZWNvcmRzJywgJ2FycmF5Jyk7XG4gICAgICBjaGVja0FyZyh0eXBlY2FzdCwgJ3R5cGVjYXN0JywgJ2Jvb2xlYW4nLCBmYWxzZSk7XG4gICAgICBjb25zdCB1cmwgPSBgJHtiYXNlVVJMfS8ke3RoaXMuYmFzZX0vJHt0YWJsZX1gO1xuICAgICAgY29uc3QgYm9keTogYnVsa1F1ZXJ5Qm9keSA9IHtcbiAgICAgICAgcmVjb3JkczogcmVjb3Jkcy5tYXAoKHJlY29yZCkgPT4gKHtcbiAgICAgICAgICBmaWVsZHM6IHJlY29yZCxcbiAgICAgICAgfSkpLFxuICAgICAgfTtcbiAgICAgIGlmICh0eXBlY2FzdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGJvZHkudHlwZWNhc3QgPSB0eXBlY2FzdDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJlczogUmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICAgICAgbWV0aG9kOiAncG9zdCcsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuYXBpS2V5fWAsXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgICAgY29uc3QgZGF0YTogQWlydGFibGVSZWNvcmRSZXNwb25zZSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICBpZiAoY2hlY2tFcnJvcihyZXMuc3RhdHVzKSkge1xuICAgICAgICBpZiAocmVzLnN0YXR1cyAhPT0gNDI5KSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnJldHJ5T25SYXRlTGltaXQpIHtcbiAgICAgICAgICByZXR1cm4gYXdhaXQgcmF0ZUxpbWl0SGFuZGxlcihcbiAgICAgICAgICAgIHVybCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgbWV0aG9kOiAncG9zdCcsXG4gICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpLFxuICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuYXBpS2V5fWAsXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0aGlzLnJldHJ5VGltZW91dCxcbiAgICAgICAgICAgIHRoaXMubWF4UmV0cnksXG4gICAgICAgICAgICAncmVjb3JkcycsXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGRhdGEucmVjb3JkcztcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihlcnIpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogVXBkYXRlcyBtdWx0aXBsZSByZWNvcmRzIG9uIHRoZSBzcGVjaWZpZWQgdGFibGVcbiAgICogQHBhcmFtIHRhYmxlIC0gVGFibGUgbmFtZVxuICAgKiBAcGFyYW0gcmVjb3JkcyAtIEFuIGFycmF5IG9mIFJlY29yZCBvYmplY3RzXG4gICAqIEBwYXJhbSBvcHRzIC0gQW4gb2JqZWN0IHdpdGggb3B0aW9ucyBmb3IgeW91ciB1cGRhdGUgc3RhdGVtZW50XG4gICAqIEByZXR1cm5zXG4gICAqIEBhc3luY1xuICAgKi9cbiAgYnVsa1VwZGF0ZSA9IGFzeW5jIChcbiAgICB0YWJsZTogc3RyaW5nLFxuICAgIHJlY29yZHM6IEFpcnRhYmxlVXBkYXRlUmVjb3JkW10sXG4gICAgb3B0cz86IHVwZGF0ZU9wdHMsXG4gICk6IFByb21pc2U8QWlydGFibGVSZWNvcmRbXT4gPT4ge1xuICAgIHRyeSB7XG4gICAgICBjaGVja0FyZyh0YWJsZSwgJ3RhYmxlJywgJ3N0cmluZycpO1xuICAgICAgY2hlY2tBcmcocmVjb3JkcywgJ3JlY29yZHMnLCAnYXJyYXknKTtcbiAgICAgIGlmIChvcHRzKSB7XG4gICAgICAgIGNoZWNrQXJnKG9wdHMuZGVzdHJ1Y3RpdmUsICdvcHRzLmRlc2N0cnVjdGl2ZScsICdib29sZWFuJywgZmFsc2UpO1xuICAgICAgICBjaGVja0FyZyhvcHRzLnR5cGVjYXN0LCAnb3B0cy50eXBlY2FzdCcsICdib29sZWFuJywgZmFsc2UpO1xuICAgICAgfVxuICAgICAgY29uc3QgdXJsID0gYCR7YmFzZVVSTH0vJHt0aGlzLmJhc2V9LyR7dGFibGV9YDtcbiAgICAgIGNvbnN0IGJvZHk6IGJ1bGtRdWVyeUJvZHkgPSB7IHJlY29yZHMgfTtcbiAgICAgIGlmIChvcHRzPy50eXBlY2FzdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGJvZHkudHlwZWNhc3QgPSBvcHRzPy50eXBlY2FzdDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJlczogUmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICAgICAgbWV0aG9kOiBvcHRzPy5kZXN0cnVjdGl2ZSA/ICdwdXQnIDogJ3BhdGNoJyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSksXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy5hcGlLZXl9YCxcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgICBjb25zdCBkYXRhOiBBaXJ0YWJsZVJlY29yZFJlc3BvbnNlID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgIGlmIChjaGVja0Vycm9yKHJlcy5zdGF0dXMpKSB7XG4gICAgICAgIGlmIChyZXMuc3RhdHVzICE9PSA0MjkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMucmV0cnlPblJhdGVMaW1pdCkge1xuICAgICAgICAgIHJldHVybiBhd2FpdCByYXRlTGltaXRIYW5kbGVyKFxuICAgICAgICAgICAgdXJsLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBtZXRob2Q6IG9wdHM/LmRlc3RydWN0aXZlID8gJ3B1dCcgOiAncGF0Y2gnLFxuICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSxcbiAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLmFwaUtleX1gLFxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGhpcy5yZXRyeVRpbWVvdXQsXG4gICAgICAgICAgICB0aGlzLm1heFJldHJ5LFxuICAgICAgICAgICAgJ3JlY29yZHMnLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBkYXRhLnJlY29yZHM7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIERlbGV0ZXMgbXVsdGlwbGUgcmVjb3JkcyBmcm9tIHRoZSBzcGVjaWZpZWQgdGFibGVcbiAgICogQHBhcmFtIHRhYmxlIC0gVGFibGUgbmFtZVxuICAgKiBAcGFyYW0gaWRzIC0gQXJyYXkgb2YgQWlydGFibGUgcmVjb3JkIElEc1xuICAgKiBAcmV0dXJuc1xuICAgKiBAYXN5bmNcbiAgICovXG4gIGJ1bGtEZWxldGUgPSBhc3luYyAoXG4gICAgdGFibGU6IHN0cmluZyxcbiAgICBpZHM6IHN0cmluZ1tdLFxuICApOiBQcm9taXNlPERlbGV0ZVJlc3BvbnNlW10+ID0+IHtcbiAgICB0cnkge1xuICAgICAgY2hlY2tBcmcodGFibGUsICd0YWJsZScsICdzdHJpbmcnKTtcbiAgICAgIGNoZWNrQXJnKGlkcywgJ2lkcycsICdhcnJheScpO1xuICAgICAgbGV0IHF1ZXJ5ID0gJyc7XG4gICAgICBpZHMuZm9yRWFjaCgoaWQsIGkpID0+IHtcbiAgICAgICAgaWYgKGkgIT09IDApIHtcbiAgICAgICAgICBxdWVyeSA9IGAke3F1ZXJ5fSZyZWNvcmRzW109JHtpZH1gO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHF1ZXJ5ID0gYHJlY29yZHNbXT0ke2lkfWA7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgY29uc3QgdXJsID0gYCR7YmFzZVVSTH0vJHt0aGlzLmJhc2V9LyR7dGFibGV9PyR7ZW5jb2RlVVJJKHF1ZXJ5KX1gO1xuICAgICAgY29uc3QgcmVzOiBSZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgICBtZXRob2Q6ICdkZWxldGUnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuYXBpS2V5fWAsXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IGRhdGE6IEFpcnRhYmxlRGVsZXRlZFJlc3BvbnNlID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgIGlmIChjaGVja0Vycm9yKHJlcy5zdGF0dXMpKSB7XG4gICAgICAgIGlmIChyZXMuc3RhdHVzICE9PSA0MjkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMucmV0cnlPblJhdGVMaW1pdCkge1xuICAgICAgICAgIHJldHVybiBhd2FpdCByYXRlTGltaXRIYW5kbGVyKFxuICAgICAgICAgICAgdXJsLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBtZXRob2Q6ICdkZWxldGUnLFxuICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuYXBpS2V5fWAsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGhpcy5yZXRyeVRpbWVvdXQsXG4gICAgICAgICAgICB0aGlzLm1heFJldHJ5LFxuICAgICAgICAgICAgJ3JlY29yZHMnLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBkYXRhLnJlY29yZHM7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiBhIHJlY29yZCBleGlzdHMsIGFuZCBpZiBpdCBkb2VzIHVwZGF0ZXMgaXQsIGlmIG5vdCBjcmVhdGVzIGEgbmV3IHJlY29yZC5cbiAgICogQHBhcmFtIHRhYmxlIC0gVGFibGUgbmFtZVxuICAgKiBAcGFyYW0gZmlsdGVyU3RyaW5nIC0gVGhlIGZpbHRlciBmb3JtdWxhIHN0cmluZyB1c2VkIHRvIGNoZWNrIGZvciBhIHJlY29yZFxuICAgKiBAcGFyYW0gcmVjb3JkIC0gUmVjb3JkIG9iamVjdCB1c2VkIHRvIGVpdGhlciB1cGRhdGUgb3IgY3JlYXRlIGEgcmVjb3JkXG4gICAqIEBwYXJhbSBvcHRzIC0gQW4gb2JqZWN0IHdpdGggb3B0aW9ucyBmb3IgeW91ciB1cGRhdGUgc3RhdGVtZW50XG4gICAqIEByZXR1cm5zXG4gICAqIEBhc3luY1xuICAgKi9cbiAgdXBzZXJ0UmVjb3JkID0gYXN5bmMgKFxuICAgIHRhYmxlOiBzdHJpbmcsXG4gICAgZmlsdGVyU3RyaW5nOiBzdHJpbmcsXG4gICAgcmVjb3JkOiBGaWVsZHMsXG4gICAgb3B0cz86IHVwZGF0ZU9wdHMsXG4gICk6IFByb21pc2U8QWlydGFibGVSZWNvcmQ+ID0+IHtcbiAgICBjaGVja0FyZyh0YWJsZSwgJ3RhYmxlJywgJ3N0cmluZycpO1xuICAgIGNoZWNrQXJnKGZpbHRlclN0cmluZywgJ2ZpbHRlclN0cmluZycsICdzdHJpbmcnKTtcbiAgICBjaGVja0FyZyhyZWNvcmQsICdyZWNvcmQnLCAnb2JqZWN0Jyk7XG4gICAgaWYgKG9wdHMpIHtcbiAgICAgIGNoZWNrQXJnKG9wdHMuZGVzdHJ1Y3RpdmUsICdvcHRzLmRlc2N0cnVjdGl2ZScsICdib29sZWFuJywgZmFsc2UpO1xuICAgICAgY2hlY2tBcmcob3B0cy50eXBlY2FzdCwgJ29wdHMudHlwZWNhc3QnLCAnYm9vbGVhbicsIGZhbHNlKTtcbiAgICB9XG4gICAgY29uc3QgZXhpc3RzID0gYXdhaXQgdGhpcy5zZWxlY3QodGFibGUsIHsgZmlsdGVyQnlGb3JtdWxhOiBmaWx0ZXJTdHJpbmcgfSk7XG4gICAgaWYgKCFleGlzdHNbMF0pIHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNyZWF0ZVJlY29yZCh0YWJsZSwgcmVjb3JkLCBvcHRzPy50eXBlY2FzdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZVJlY29yZChcbiAgICAgICAgdGFibGUsXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogZXhpc3RzWzBdLmlkLFxuICAgICAgICAgIGZpZWxkczogcmVjb3JkLFxuICAgICAgICB9LFxuICAgICAgICBvcHRzLFxuICAgICAgKTtcbiAgICB9XG4gIH07XG59XG5cbmV4cG9ydCA9IEFzeW5jQWlydGFibGU7XG5cbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICB3aW5kb3cuQXN5bmNBaXJ0YWJsZSA9IEFzeW5jQWlydGFibGU7XG59XG4iLCJpbXBvcnQgeyBTZWxlY3RPcHRpb25zIH0gZnJvbSAnLi9AdHlwZXMnO1xuaW1wb3J0IHF1ZXJ5QnVpbGRlciBmcm9tICcuL3F1ZXJ5QnVpbGRlcic7XG5cbmV4cG9ydCBkZWZhdWx0IChvcHRzOiBTZWxlY3RPcHRpb25zKTogc3RyaW5nID0+IHtcbiAgaWYgKFxuICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvcHRzLCAnZmlsdGVyQnlGb3JtdWxhJykgJiZcbiAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob3B0cywgJ3doZXJlJylcbiAgKVxuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICdDYW5ub3QgdXNlIGJvdGggd2hlcmUgYW5kIGZpbHRlckJ5Rm9ybXVsYSBhcyB0aGV5IGFjY29tcGxpc2ggdGhlIHNhbWUgdGhpbmcnLFxuICAgICk7XG5cbiAgY29uc3QgcGFyYW1zID0gT2JqZWN0LmtleXMob3B0cylcbiAgICAubWFwKChrZXk6IHN0cmluZywgaSkgPT4ge1xuICAgICAgLyoqIEB0b2RvIEZpbmQgYSBiZXR0ZXIgdHlwZSB0aGFuIGFueSBmb3IgdGhpcyAqL1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgIGNvbnN0IG9wdDogYW55ID0gb3B0c1trZXkgYXMga2V5b2YgU2VsZWN0T3B0aW9uc107XG4gICAgICBsZXQgZm9ybWF0dGVkO1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkob3B0KSkge1xuICAgICAgICBmb3JtYXR0ZWQgPSBvcHRcbiAgICAgICAgICAubWFwKChpdGVtLCBqKSA9PiB7XG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGVvZiBpdGVtKSB7XG4gICAgICAgICAgICAgIGNhc2UgJ29iamVjdCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKGl0ZW0pXG4gICAgICAgICAgICAgICAgICAubWFwKChzdWJLZXkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGAke2tleX1bJHtqfV1bJHtzdWJLZXl9XT0ke2l0ZW1bc3ViS2V5XX1gO1xuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIC5qb2luKCcmJyk7XG4gICAgICAgICAgICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGAke2tleX1bXT0ke2l0ZW19YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICAgIC5qb2luKCcmJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoa2V5ID09PSAnd2hlcmUnKSB7XG4gICAgICAgICAgZm9ybWF0dGVkID0gYGZpbHRlckJ5Rm9ybXVsYT0ke3F1ZXJ5QnVpbGRlcihvcHQpfWA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZm9ybWF0dGVkID0gYCR7a2V5fT0ke29wdH1gO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gaSAhPT0gMCA/IGAmJHtmb3JtYXR0ZWR9YCA6IGZvcm1hdHRlZDtcbiAgICB9KVxuICAgIC5qb2luKCcnKTtcbiAgcmV0dXJuIGVuY29kZVVSSShwYXJhbXMpO1xufTtcbiIsImltcG9ydCB7IEFyZyB9IGZyb20gJy4vQHR5cGVzJztcblxuZXhwb3J0IGRlZmF1bHQgKFxuICBhcmc6IEFyZyxcbiAgbmFtZTogc3RyaW5nLFxuICB0eXBlOiBzdHJpbmcsXG4gIHJlcXVpcmVkID0gdHJ1ZSxcbik6IHZvaWQgPT4ge1xuICBpZiAoYXJnID09PSB1bmRlZmluZWQgJiYgcmVxdWlyZWQpXG4gICAgdGhyb3cgbmV3IEVycm9yKGBBcmd1bWVudCBcIiR7bmFtZX1cIiBpcyByZXF1aXJlZC5gKTtcbiAgaWYgKGFyZyA9PT0gdW5kZWZpbmVkICYmICFyZXF1aXJlZCkgcmV0dXJuO1xuICBpZiAodHlwZW9mIGFyZyAhPT0gdHlwZSkge1xuICAgIGlmICh0eXBlID09PSAnYXJyYXknICYmIEFycmF5LmlzQXJyYXkoYXJnKSkgcmV0dXJuO1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBJbmNvcnJlY3QgZGF0YSB0eXBlIG9uIGFyZ3VtZW50IFwiJHtuYW1lfVwiLiBSZWNlaXZlZCBcIiR7dHlwZW9mIGFyZ31cIjogZXhwZWN0ZWQgXCIke3R5cGV9XCJgLFxuICAgICk7XG4gIH1cbn07XG4iLCJleHBvcnQgZGVmYXVsdCAoc3RhdHVzOiBudW1iZXIpOiBib29sZWFuID0+IHN0YXR1cyA+PSAzMDA7XG4iLCJpbXBvcnQgKiBhcyBub2RlRmV0Y2ggZnJvbSAnbm9kZS1mZXRjaCc7XG5leHBvcnQgZGVmYXVsdCB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJ1xuICA/IHdpbmRvdy5mZXRjaC5iaW5kKHdpbmRvdylcbiAgOiAoKG5vZGVGZXRjaCBhcyB1bmtub3duKSBhcyB0eXBlb2YgZmV0Y2gpO1xuIiwiaW1wb3J0IHtcbiAgTnVtZXJpY2FsT3BlcmF0b3JzLFxuICBRdWVyeU9iamVjdCxcbiAgTG9naWNhbE9wZXJhdG9ycyxcbiAgUXVlcnlGaWVsZCxcbiAgQmFzZUZpZWxkVHlwZSxcbiAgQ29tcGFyaXNvbk9iamVjdCxcbn0gZnJvbSAnLi9AdHlwZXMnO1xuXG5jb25zdCBvcGVyYXRvcnMgPSBbJz0nLCAnIT0nLCAnPicsICc+PScsICc8JywgJzw9J107XG5cbmV4cG9ydCBjb25zdCBpc1F1ZXJ5T2JqZWN0ID0gKGl0ZW06IFF1ZXJ5RmllbGQpOiBib29sZWFuID0+IHtcbiAgaWYgKGl0ZW0gPT09IHVuZGVmaW5lZCkgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIFF1ZXJ5IE9iamVjdCcpO1xuICBjb25zdCB0eXBlcyA9IFsnc3RyaW5nJywgJ251bWJlcicsICdib29sZWFuJ107XG4gIHJldHVybiBpdGVtICE9PSBudWxsICYmICF0eXBlcy5pbmNsdWRlcyh0eXBlb2YgaXRlbSk7XG59O1xuXG5leHBvcnQgY29uc3QgYnVpbGRFeHByZXNzaW9uID0gKG9iajogQ29tcGFyaXNvbk9iamVjdCwgb3A6IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0JyB8fCBBcnJheS5pc0FycmF5KG9iaikpXG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIG9yIEludmFsaWQgQ29tcGFyaXNvbiBPYmplY3QnKTtcbiAgaWYgKHR5cGVvZiBvcCAhPT0gJ3N0cmluZycgJiYgIW9wZXJhdG9ycy5pbmNsdWRlcyhvcCkpXG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIG9yIEludmFsaWQgQ29tcGFyaXNvbiBPcGVyYXRvcicpO1xuICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMob2JqKTtcbiAgY29uc3QgZXhwcmVzc2lvbk1hcHBlciA9IChrOiBzdHJpbmcsIGk6IG51bWJlcikgPT4ge1xuICAgIGNvbnN0IHZhbCA9IGJhc2VIYW5kbGVyKG9ialtrXSk7XG4gICAgcmV0dXJuIGB7JHtrfX0gJHtvcH0gJHt2YWx9JHtpIDwga2V5cy5sZW5ndGggLSAxID8gJywgJyA6ICcnfWA7XG4gIH07XG5cbiAgY29uc3QgZXhwID0gYCR7a2V5cy5tYXAoZXhwcmVzc2lvbk1hcHBlcikuam9pbignJyl9YDtcbiAgcmV0dXJuIGtleXMubGVuZ3RoID4gMSA/IGBBTkQoJHtleHB9KWAgOiBleHA7XG59O1xuXG5leHBvcnQgY29uc3QgbnVtZXJpY2FsT3BlcmF0b3JzOiBOdW1lcmljYWxPcGVyYXRvcnMgPSB7XG4gICRndDogKHZhbCkgPT4ge1xuICAgIHJldHVybiBidWlsZEV4cHJlc3Npb24odmFsLCAnPicpO1xuICB9LFxuICAkbHQ6ICh2YWwpID0+IHtcbiAgICByZXR1cm4gYnVpbGRFeHByZXNzaW9uKHZhbCwgJzwnKTtcbiAgfSxcbiAgJGd0ZTogKHZhbCkgPT4ge1xuICAgIHJldHVybiBidWlsZEV4cHJlc3Npb24odmFsLCAnPj0nKTtcbiAgfSxcbiAgJGx0ZTogKHZhbCkgPT4ge1xuICAgIHJldHVybiBidWlsZEV4cHJlc3Npb24odmFsLCAnPD0nKTtcbiAgfSxcbiAgJGVxOiAodmFsKSA9PiB7XG4gICAgcmV0dXJuIGJ1aWxkRXhwcmVzc2lvbih2YWwsICc9Jyk7XG4gIH0sXG4gICRuZXE6ICh2YWwpID0+IHtcbiAgICByZXR1cm4gYnVpbGRFeHByZXNzaW9uKHZhbCwgJyE9Jyk7XG4gIH0sXG59O1xuXG5leHBvcnQgY29uc3QgbG9naWNhbE9wZXJhdG9yczogTG9naWNhbE9wZXJhdG9ycyA9IHtcbiAgJG5vdDogKGV4cHJlc3Npb246IFF1ZXJ5T2JqZWN0KSA9PiBgTk9UKCR7cXVlcnlCdWlsZGVyKGV4cHJlc3Npb24pfSlgLFxuICAkYW5kOiAoYXJnczogUXVlcnlPYmplY3RbXSkgPT4ge1xuICAgIGxldCBzdHIgPSAnQU5EKCc7XG4gICAgYXJncy5mb3JFYWNoKChhcmcsIGkpID0+IHtcbiAgICAgIHN0ciArPSBxdWVyeUJ1aWxkZXIoYXJnKTtcbiAgICAgIGlmIChpIDwgYXJncy5sZW5ndGggLSAxKSB7XG4gICAgICAgIHN0ciArPSAnLCAnO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBzdHIgKyAnKSc7XG4gIH0sXG4gICRvcjogKGFyZ3M6IFF1ZXJ5T2JqZWN0W10pID0+IHtcbiAgICBsZXQgc3RyID0gJ09SKCc7XG4gICAgYXJncy5mb3JFYWNoKChhcmcsIGkpID0+IHtcbiAgICAgIHN0ciArPSBxdWVyeUJ1aWxkZXIoYXJnKTtcbiAgICAgIGlmIChpIDwgYXJncy5sZW5ndGggLSAxKSB7XG4gICAgICAgIHN0ciArPSAnLCAnO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBzdHIgKyAnKSc7XG4gIH0sXG59O1xuXG5leHBvcnQgY29uc3QgYm9vbGVhbkhhbmRsZXIgPSAoYm9vbDogYm9vbGVhbik6IHN0cmluZyA9PiB7XG4gIGlmICh0eXBlb2YgYm9vbCAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHR5cGUnKTtcbiAgfVxuICByZXR1cm4gYm9vbCA/ICdUUlVFKCknIDogJ0ZBTFNFKCknO1xufTtcblxuZXhwb3J0IGNvbnN0IGJhc2VIYW5kbGVyID0gKHZhbDogc3RyaW5nIHwgbnVtYmVyIHwgYm9vbGVhbiB8IG51bGwpOiBzdHJpbmcgPT4ge1xuICBpZiAodmFsID09PSBudWxsKSB7XG4gICAgcmV0dXJuICdCTEFOSygpJztcbiAgfVxuICBzd2l0Y2ggKHR5cGVvZiB2YWwpIHtcbiAgICBjYXNlICdudW1iZXInOlxuICAgICAgcmV0dXJuIGAke3ZhbH1gO1xuICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICByZXR1cm4gYCcke3ZhbH0nYDtcbiAgICBjYXNlICdib29sZWFuJzpcbiAgICAgIHJldHVybiBib29sZWFuSGFuZGxlcih2YWwpO1xuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dyb25nIFR5cGUnKTtcbiAgfVxufTtcblxuY29uc3QgcXVlcnlCdWlsZGVyID0gKHF1ZXJ5OiBRdWVyeU9iamVjdCk6IHN0cmluZyA9PiB7XG4gIGxldCBmb3JtdWxhU3RyaW5nID0gJyc7XG4gIGlmIChPYmplY3Qua2V5cyhxdWVyeSBhcyBSZWNvcmQ8c3RyaW5nLCBRdWVyeUZpZWxkPikubGVuZ3RoID4gMSkge1xuICAgIGZvcm11bGFTdHJpbmcgKz0gbG9naWNhbE9wZXJhdG9ycy4kYW5kKFxuICAgICAgT2JqZWN0LmtleXMocXVlcnkpLm1hcCgoaykgPT4gKHsgW2tdOiBxdWVyeVtrXSB9KSksXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBxdWVyeSkge1xuICAgICAgY29uc3QgY3VycmVudCA9IHF1ZXJ5W2tleV07XG5cbiAgICAgIGlmIChrZXkgaW4gbnVtZXJpY2FsT3BlcmF0b3JzICYmIGlzUXVlcnlPYmplY3QoY3VycmVudCBhcyBRdWVyeU9iamVjdCkpIHtcbiAgICAgICAgZm9ybXVsYVN0cmluZyArPSBudW1lcmljYWxPcGVyYXRvcnNba2V5XShcbiAgICAgICAgICBjdXJyZW50IGFzIFJlY29yZDxzdHJpbmcsIG51bWJlcj4sXG4gICAgICAgICk7XG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICBrZXkgaW4gbG9naWNhbE9wZXJhdG9ycyAmJlxuICAgICAgICAoaXNRdWVyeU9iamVjdChjdXJyZW50IGFzIFF1ZXJ5T2JqZWN0KSB8fCBBcnJheS5pc0FycmF5KGN1cnJlbnQpKVxuICAgICAgKSB7XG4gICAgICAgIGZvcm11bGFTdHJpbmcgKz0gbG9naWNhbE9wZXJhdG9yc1trZXldKFxuICAgICAgICAgIGN1cnJlbnQgYXMgUXVlcnlPYmplY3QgJiBRdWVyeU9iamVjdFtdLFxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9ybXVsYVN0cmluZyArPSBidWlsZEV4cHJlc3Npb24oXG4gICAgICAgICAgcXVlcnkgYXMgUmVjb3JkPHN0cmluZywgQmFzZUZpZWxkVHlwZT4sXG4gICAgICAgICAgJz0nLFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gZm9ybXVsYVN0cmluZztcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHF1ZXJ5QnVpbGRlcjtcbiIsImltcG9ydCBmZXRjaCBmcm9tICcuL2ZldGNoJztcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIChcbiAgdXJsOiBzdHJpbmcsXG4gIG9wdHM6IFJlcXVlc3RJbml0LFxuICByZXRyeVRpbWVvdXQ6IG51bWJlcixcbiAgbWF4UmV0cnk6IG51bWJlcixcbiAga2V5Pzogc3RyaW5nLFxuICAvKiogQHRvZG8gRmluZCBhIGJldHRlciB0eXBlIHRoYW4gYW55IGZvciB0aGlzICovXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4pOiBQcm9taXNlPGFueT4gPT4ge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNvbnN0IHJldHJ5UmF0ZUxpbWl0ID0gKFxuICAgICAgdXJsOiBzdHJpbmcsXG4gICAgICBvcHRzOiBSZXF1ZXN0SW5pdCxcbiAgICAgIHJldHJ5VGltZW91dDogbnVtYmVyLFxuICAgICAgbWF4UmV0cnk6IG51bWJlcixcbiAgICAgIGtleT86IHN0cmluZyxcbiAgICApOiB2b2lkID0+IHtcbiAgICAgIGlmIChtYXhSZXRyeSAmJiBtYXhSZXRyeSA8IDEpIHtcbiAgICAgICAgcmVqZWN0KCdNYXggdGltZW91dCBleGNlZWRlZCcpO1xuICAgICAgfVxuICAgICAgc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsLCBvcHRzKTtcbiAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gNDI5KSB7XG4gICAgICAgICAgICByZXR1cm4gcmV0cnlSYXRlTGltaXQoXG4gICAgICAgICAgICAgIHVybCxcbiAgICAgICAgICAgICAgb3B0cyxcbiAgICAgICAgICAgICAgcmV0cnlUaW1lb3V0ICogMS41LFxuICAgICAgICAgICAgICBtYXhSZXRyeSAtIHJldHJ5VGltZW91dCxcbiAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGtleSkge1xuICAgICAgICAgICAgcmVzb2x2ZShkYXRhW2tleV0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXNvbHZlKGRhdGEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgIH1cbiAgICAgIH0sIHJldHJ5VGltZW91dCk7XG4gICAgfTtcblxuICAgIHJldHJ5UmF0ZUxpbWl0KHVybCwgb3B0cywgcmV0cnlUaW1lb3V0LCBtYXhSZXRyeSwga2V5KTtcbiAgfSk7XG59O1xuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0aWYoX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSkge1xuXHRcdHJldHVybiBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZVxuLy8gVGhpcyBlbnRyeSBtb2R1bGUgaXMgcmVmZXJlbmNlZCBieSBvdGhlciBtb2R1bGVzIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbl9fd2VicGFja19yZXF1aXJlX18oNzU5KTtcbiJdLCJzb3VyY2VSb290IjoiIn0=